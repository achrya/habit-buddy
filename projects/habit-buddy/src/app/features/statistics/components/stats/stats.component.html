<div class="view max-w-6xl mx-auto">
  <!-- Overview Stats -->
  <div class="bg-white border border-slate-100 rounded-2xl p-4 mb-6">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-3">
      <div>
        <div class="text-lg font-semibold">📊 Overview Statistics</div>
        <div class="text-sm text-slate-600">Comprehensive metrics across all your habits</div>
      </div>
      <div class="text-sm text-slate-500 bg-slate-100 px-3 py-1 rounded-full self-start sm:self-auto">
        {{ habits().length }} {{ habits().length === 1 ? 'habit' : 'habits' }}
      </div>
    </div>

    <!-- Primary Metrics -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-4">
      <div class="p-3 md:p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl text-center border border-blue-200">
        <div class="text-2xl md:text-3xl font-bold text-blue-600">{{ habitService.totalCompleted() }}</div>
        <div class="text-xs md:text-sm text-blue-700 font-medium">Total Check-ins</div>
        <div class="text-xs text-blue-600 mt-1">{{ getTotalDays() }} total days tracked</div>
      </div>
      <div class="p-3 md:p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl text-center border border-green-200">
        <div class="text-2xl md:text-3xl font-bold text-green-600">{{ habitService.averageCompletion() }}%</div>
        <div class="text-xs md:text-sm text-green-700 font-medium">Avg Completion</div>
        <div class="text-xs text-green-600 mt-1">{{ getCompletionRate() }}% this week</div>
      </div>
      <div class="p-3 md:p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl text-center border border-purple-200">
        <div class="text-2xl md:text-3xl font-bold text-purple-600">{{ habitService.bestCurrentStreak() }}</div>
        <div class="text-xs md:text-sm text-purple-700 font-medium">Best Current Streak</div>
        <div class="text-xs text-purple-600 mt-1">{{ getActiveStreaks() }} active streaks</div>
      </div>
      <div class="p-3 md:p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl text-center border border-orange-200">
        <div class="text-2xl md:text-3xl font-bold text-orange-600">{{ habitService.bestLongestStreak() }}</div>
        <div class="text-xs md:text-sm text-orange-700 font-medium">Longest Streak</div>
        <div class="text-xs text-orange-600 mt-1">{{ getAverageStreak() }} avg streak</div>
      </div>
    </div>

    <!-- Secondary Metrics -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
      <div class="p-3 bg-slate-50 rounded-lg text-center">
        <div class="text-lg md:text-xl font-semibold text-slate-700">{{ getConsistencyScore() }}%</div>
        <div class="text-xs text-slate-600">Consistency Score</div>
      </div>
      <div class="p-3 bg-slate-50 rounded-lg text-center">
        <div class="text-lg md:text-xl font-semibold text-slate-700">{{ getTotalStreakBreaks() }}</div>
        <div class="text-xs text-slate-600">Streak Breaks</div>
      </div>
      <div class="p-3 bg-slate-50 rounded-lg text-center">
        <div class="text-lg md:text-xl font-semibold text-slate-700">{{ getMostProductiveDay() }}</div>
        <div class="text-xs text-slate-600">Most Productive Day</div>
      </div>
    </div>
  </div>

  <!-- Insights and Achievements -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
    <!-- Key Insights -->
    <div class="bg-white border border-slate-100 rounded-2xl p-4">
      <div class="flex items-center gap-2 mb-4">
        <div class="text-lg font-semibold">💡 Key Insights</div>
      </div>
      
      <div class="space-y-3">
        @for (insight of getKeyInsights(); track $index) {
          <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-lg">
            <div class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
              <div class="w-2 h-2 bg-blue-600 rounded-full"></div>
            </div>
            <div class="text-sm text-slate-700">{{ insight }}</div>
          </div>
        }
      </div>
    </div>

    <!-- Achievements -->
    <div class="bg-white border border-slate-100 rounded-2xl p-4">
      <div class="flex items-center gap-2 mb-4">
        <div class="text-lg font-semibold">🏅 Recent Achievements</div>
      </div>
      
      <div class="space-y-3">
        @for (achievement of getRecentAchievements(); track $index) {
          <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200">
            <div class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center">
              <span class="text-yellow-600 text-sm">🏆</span>
            </div>
            <div>
              <div class="text-sm font-medium text-yellow-800">{{ achievement.title }}</div>
              <div class="text-xs text-yellow-600">{{ achievement.date }}</div>
            </div>
          </div>
        }
      </div>
    </div>
  </div>

  <!-- TODO: Habit Performance Grid - To be implemented later -->
  <!--
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
    <div class="bg-white border border-slate-100 rounded-2xl p-4">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
        <div>
          <div class="text-lg font-semibold">🏆 Habit Performance</div>
          <div class="text-sm text-slate-600">Individual habit statistics</div>
        </div>
        <div class="text-xs text-slate-500 self-start sm:self-auto">Ranked by completion %</div>
      </div>
      
      <div class="space-y-3">
        @for (habit of getTopPerformingHabits(); track habit.id) {
          <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium"
                   [style.background-color]="habit.color">
                {{ habit.title.charAt(0).toUpperCase() }}
              </div>
              <div>
                <div class="text-sm font-medium">{{ habit.title }}</div>
                <div class="text-xs text-slate-600">{{ getHabitCompletionRate(habit) }}% • {{ getHabitCurrentStreak(habit) }} day streak</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-sm font-semibold">{{ getHabitCompletionRate(habit) }}%</div>
              <div class="w-16 h-2 bg-slate-200 rounded-full overflow-hidden">
                <div class="h-full bg-blue-500 rounded-full transition-all duration-500"
                     [style.width.%]="getHabitCompletionRate(habit)"></div>
              </div>
            </div>
          </div>
        }
      </div>
    </div>
  -->

  <!-- Weekly Heatmap -->
  <div class="bg-white border border-slate-100 rounded-2xl p-4 mb-6">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-3">
        <div>
          <div class="text-lg font-semibold">📅 Weekly Heatmap</div>
          <div class="text-sm text-slate-600">Your activity over the past 12 weeks</div>
        </div>
        <div class="text-xs text-slate-500 flex items-center gap-2 self-start sm:self-auto">
          <span class="inline-block w-3 h-3 bg-green-300 rounded-sm"></span>
          <span>More active</span>
          <span class="inline-block w-3 h-3 bg-slate-200 rounded-sm ml-2"></span>
          <span>Less active</span>
        </div>
      </div>
      
      <div class="grid grid-cols-12 gap-1">
        @for (week of getWeeklyHeatmap(); track $index) {
          <div class="space-y-1">
            @for (day of week; track $index) {
              <div class="w-3 h-3 rounded-sm cursor-pointer"
                   [class]="getHeatmapColor(day)"
                   [title]="day + ' check-ins'">
              </div>
            }
          </div>
        }
      </div>
    </div>

  <!-- Trend Charts -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
    <!-- Weekly Trend -->
    <div class="bg-white border border-slate-100 rounded-2xl p-4">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
        <div>
          <div class="text-lg font-semibold">📈 Weekly Trend</div>
          <div class="text-sm text-slate-600">Last 7 days activity</div>
        </div>
        <div class="text-xs text-slate-500 self-start sm:self-auto">{{ getWeeklyAverage() }} avg/day</div>
      </div>
      
      <div style="height:200px;">
        <app-chart [data]="getWeeklyTrend()" />
      </div>
    </div>

    <!-- Monthly Trend -->
    <div class="bg-white border border-slate-100 rounded-2xl p-4">
      <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
        <div>
          <div class="text-lg font-semibold">📊 Monthly Trend</div>
          <div class="text-sm text-slate-600">This month's daily activity</div>
        </div>
        <div class="text-xs text-slate-500 self-start sm:self-auto">{{ getMonthlyAverage() }} avg/day</div>
      </div>
      
      <div style="height:200px;">
        <app-chart [data]="getMonthlyTrend()" />
      </div>
    </div>
  </div>


  <!-- Yearly Overview -->
  <div class="bg-white border border-slate-100 rounded-2xl p-4">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2">
      <div>
        <div class="text-lg font-semibold">📅 Yearly Overview</div>
        <div class="text-sm text-slate-600">Your progress throughout {{ getCurrentYear() }}</div>
      </div>
      <div class="text-xs text-slate-500 self-start sm:self-auto">{{ getYearlyTotal() }} total check-ins</div>
    </div>
    
    <div style="height:200px;">
      <app-chart [data]="getYearlyTrend()" />
    </div>
  </div>
</div>
